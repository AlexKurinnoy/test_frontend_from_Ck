"use strict";function getNumbers(e){document.getElementById("result").innerHTML="",document.getElementById("line").innerHTML+=e.value,inputLine.push(e.value),console.log(inputLine)}function equally(){if(inputLine.length>0)try{if(isNaN(inputLine[0])){var x="0";return inputLine.unshift(x),result=eval(inputLine.join("")),document.getElementById("result").innerHTML=result,document.getElementById("line").innerHTML="",inputLine=[],!0}if(isNaN(inputLine[inputLine.length-1])){console.log("resultarray");var someoper=inputLine[inputLine.length-1];inputLine.splice(inputLine.length-1,1);var resultarray=inputLine;resultarray.push(someoper,eval(resultarray.join(""))),console.log(resultarray),result=eval(resultarray.join("")),document.getElementById("result").innerHTML=result,document.getElementById("line").innerHTML="",inputLine=[]}else result=eval(inputLine.join("")),isFinite(result)?(document.getElementById("result").innerHTML=result,writeLocalStorage(),document.getElementById("line").innerHTML="",inputLine=[]):(inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="Некорректный ввод!")}catch(e){console.log(inputLine.join("")),inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="Ошибка ввода"}}function square(){try{inputLine.length>0&&(result=Math.sqrt(eval(inputLine.join(""))).toFixed(6),document.getElementById("result").innerHTML=result,writeLocalStorage(),document.getElementById("line").innerHTML="",inputLine=[])}catch(e){inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML=""}}function point(){document.getElementById("result").innerHTML="";for(var e=0,n=inputLine.lastIndexOf("."),t=inputLine.length-1;t>=0;t--)isNaN(inputLine[t])&&"."!=inputLine[t]&&(e=t);n>=0&&n>e?isNaN(inputLine[n+1])?pointValidator():console.log("точка лишняя"):pointValidator()}function pointValidator(){switch(inputLine[inputLine.length-1]){case".":console.log("after point");break;case void 0:case"+":case"-":case"*":case"/":document.getElementById("line").innerHTML+="0.",inputLine.push("0"),inputLine.push(".");break;default:document.getElementById("line").innerHTML+=".",inputLine.push(".")}}function reloadCalc(){inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="",result=""}function percent(){for(var i=inputLine.length-1;i>=0;i--)try{if("*"==inputLine[i])if(isNaN(inputLine[0])||isNaN(inputLine[inputLine.length-1]))inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="Ожидалось х*у%";else{var x=inputLine.slice(0,i),y=inputLine.slice(i+1);console.log(x.join("")),console.log(y.join("")),result=eval(x.join(""))/100*eval(y.join("")),document.getElementById("result").innerHTML=result,writeLocalStorage(),document.getElementById("line").innerHTML="",inputLine=[]}}catch(e){inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="Некорректный ввод!"}}function writeLocalStorage(){var e={data:(new Date).toString(),input:document.getElementById("line").innerHTML,result:result};try{var n=localStorage.length;localStorage.setItem(n+1,JSON.stringify(e))}catch(e){inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="Проблемы с localStorage"}}function getXmlHttp(){var e;try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(n){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(n){e=!1}}return e||"undefined"==typeof XMLHttpRequest||(e=new XMLHttpRequest),e}function money(e){var n=getXmlHttp();try{n.open("GET","https://api.privatbank.ua/p24api/pubinfo?exchange&coursid=5",!0),n.onreadystatechange=function(){if(4===n.readyState&&200===n.status){var t=n.responseXML;"euro"==e.id?(equally(),result/=t.getElementsByTagName("exchangerate")[1].getAttribute("sale"),document.getElementById("result").innerHTML=result.toFixed(2)+" Euro",document.getElementById("line").innerHTML="",inputLine=[],result=""):(equally(),result/=t.getElementsByTagName("exchangerate")[0].getAttribute("sale"),document.getElementById("result").innerHTML=result.toFixed(2)+" $",document.getElementById("line").innerHTML="",inputLine=[],result="")}},n.send(null)}catch(e){inputLine=[],document.getElementById("line").innerHTML="",document.getElementById("result").innerHTML="Проблемы с удаленным ресурсом"}}function info(){var e=window.localStorage;document.getElementById("infoList").innerHTML="";for(var n=1;n<=e.length;n++){var t=JSON.parse(localStorage.getItem(n));document.getElementById("infoList").innerHTML+=n+") "+t.input+" = "+t.result+"<br/>"}}window.result=0,window.inputLine=[];